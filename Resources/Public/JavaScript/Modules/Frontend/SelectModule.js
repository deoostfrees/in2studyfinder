define(["TYPO3/CMS/In2studyfinder/Vendor/select2","jquery"],function(e,t){"use strict";var r={identifiers:{select:".js-in2studyfinder-select2"}};return r.initialize=function(){var e={};this.updatePlaceholderLabel(),t(r.identifiers.select).select2({matcher:function(t,n){return e=t,r.matcher(t,n)},sorter:function(e){var t=e.slice(0);return t.sort(function(e,t){return e.text.toUpperCase()<t.text.toUpperCase()?-1:e.text.toUpperCase()>t.text.toUpperCase()?1:0}),t},allowClear:!1,placeholder:"select degree program or enter keyword",language:"de"}),this.redirectOnSelect()},r.matcher=function(e,r){if(""===t.trim(e.term))return r;var n=r.text.toUpperCase(),i=e.term.toUpperCase(),l=r.element,a=t(l).attr("alt"),c=!1;if(void 0!==a&&""!==a){var d=a.split(",");t.each(d,function(e,t){t=t.trim(),(r.text.toUpperCase().indexOf(i.toUpperCase())>-1||t.toUpperCase().indexOf(i.toUpperCase())>-1)&&(c=!0)})}if(n.indexOf(i)>-1||c===!0)return r;if(r.children&&r.children.length>0){for(var s=t.extend(!0,{},r),o=r.children.length-1;o>=0;o--){var f=r.children[o],u=this.matcher(e,f);null===u&&s.children.splice(o,1)}return s.children.length>0?s:this.matcher(e,s)}return null},r.redirectOnSelect=function(){t(r.identifiers.select).on("select2:select",function(){var e=t(r.identifiers.select).select2("data"),n=e[0].element.dataset.url;n.length&&(window.location.href=n)})},r.updatePlaceholderLabel=function(){"de"===t("html").attr("lang")?t(r.identifiers.select).attr("data-placeholder","Studiengang w√§hlen oder Suchbegriff eingeben"):t(r.identifiers.select).attr("data-placeholder","Select degree program or enter keyword")},r});