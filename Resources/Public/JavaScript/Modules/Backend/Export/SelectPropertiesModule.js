define(["TYPO3/CMS/In2studyfinder/Utility/UiUtility"],function(e){"use strict";var t={selectedPropertiesList:document.querySelector(".js-in2studyfinder-selected-properties-list"),availablePropertiesList:document.querySelector(".js-in2studyfinder-property-list")};return t.initialize=function(){t.addEventListener()},t.addEventListener=function(){var e=document.querySelector(".js-in2studyfinder-property-list");e.addEventListener("click",t.addPropertyToSelectedProperties);var r=document.querySelector(".js-in2studyfinder-remove-item");r.addEventListener("click",t.removeSelectedItems);var i=document.querySelector(".js-in2studyfinder-move-item-up");i.addEventListener("click",t.moveSelectedItemsUp);var o=document.querySelector(".js-in2studyfinder-move-item-down");o.addEventListener("click",t.moveSelectedItemsDown);var n=document.querySelector(".js-in2studyfinder-move-item-end");n.addEventListener("click",t.moveSelectedItemsToEnd);var d=document.querySelector(".js-in2studyfinder-move-item-begin");d.addEventListener("click",t.moveSelectedItemsToBegin)},t.addPropertyToSelectedProperties=function(r){var i=r.target;if("true"===i.getAttribute("data-in2studyfinder-property-selectable")){var o=i.cloneNode(!0);e.hideElement(i),e.removeStyles(o),o.getAttribute("data-in2studyfinder-parent-property-label")&&o.insertAdjacentHTML("afterbegin",o.getAttribute("data-in2studyfinder-parent-property-label")),t.selectedPropertiesList.add(o)}},t.removeSelectedItems=function(){var e=t.getSelectionFromSelectedPropertiesList();e.length&&e.forEach(function(e){t.selectedPropertiesList.options[e.index].remove(),t.showPropertyOnAvailablePropertiesList(e.value)})},t.moveSelectedItemsUp=function(){var e=t.getSelectionFromSelectedPropertiesList(),r=t.selectedPropertiesList;if(e.length)for(var i=0;i<e.length;i++)if(e[i].index>0){var o=e[i].index-1,n=e[i].index,d=e[i],s=r.options[e[i].index-1];r.removeChild(d),r.removeChild(s),r.add(d,o),r.add(s,n)}},t.moveSelectedItemsDown=function(){var e=t.getSelectionFromSelectedPropertiesList(),r=t.selectedPropertiesList;if(e.length)for(var i=e.length-1;i>=0;i--)if(e[i].index+1<=r.length-1){var o=e[i].index,n=e[i].index+1,d=e[i],s=r.options[e[i].index+1];r.removeChild(s),r.removeChild(d),r.add(s,o),r.add(d,n)}},t.moveSelectedItemsToEnd=function(){var e=t.getSelectionFromSelectedPropertiesList(),r=t.selectedPropertiesList;if(e.length)for(var i=e.length-1;i>=0;i--)r.removeChild(e[i]),r.add(e[i])},t.moveSelectedItemsToBegin=function(){var e=t.getSelectionFromSelectedPropertiesList(),r=t.selectedPropertiesList;if(e.length)for(var i=0;i<e.length;i++)r.removeChild(e[i]),r.add(e[i],0)},t.showPropertyOnAvailablePropertiesList=function(r){var i=t.availablePropertiesList.querySelector('option[value="'+r+'"]');e.showElementAsBlock(i)},t.getSelectionFromSelectedPropertiesList=function(){for(var e=[],r=t.selectedPropertiesList,i=0;i<t.selectedPropertiesList.length;i++)r.options[i].selected&&e.push(r.options[i]);return e},t});