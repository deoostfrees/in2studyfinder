define(["TYPO3/CMS/In2studyfinder/Utility/UiUtility"],function(e){"use strict";var t={selectedPropertiesList:document.querySelector(".js-in2studyfinder-selected-properties-list"),availablePropertiesList:document.querySelector(".js-in2studyfinder-property-list")};return t.initialize=function(){t.addEventListener()},t.addEventListener=function(){var e=document.querySelector(".js-in2studyfinder-property-list");e.addEventListener("click",t.addPropertyToSelectedProperties);var i=document.querySelector(".js-in2studyfinder-remove-item");i.addEventListener("click",t.removeSelectedItems);var r=document.querySelector(".js-in2studyfinder-move-item-up");r.addEventListener("click",t.moveSelectedItemsUp);var n=document.querySelector(".js-in2studyfinder-move-item-down");n.addEventListener("click",t.moveSelectedItemsDown);var o=document.querySelector(".js-in2studyfinder-move-item-end");o.addEventListener("click",t.moveSelectedItemsToEnd);var d=document.querySelector(".js-in2studyfinder-move-item-begin");d.addEventListener("click",t.moveSelectedItemsToBegin)},t.addPropertyToSelectedProperties=function(i){var r=i.target;if("true"===r.getAttribute("data-in2studyfinder-property-selectable")){var n=r.cloneNode(!0);e.hideElement(r),e.removeStyles(n),n.getAttribute("data-in2studyfinder-parent-property-label")&&n.insertAdjacentHTML("afterbegin",n.getAttribute("data-in2studyfinder-parent-property-label")),t.selectedPropertiesList.add(n)}},t.removeSelectedItems=function(){var e=t.getSelectionFromSelectedPropertiesList();e.length&&e.forEach(function(e){t.selectedPropertiesList.options[e.index].remove(),t.showPropertyOnAvailablePropertiesList(e.value)})},t.moveSelectedItemsUp=function(){var e=t.getSelectionFromSelectedPropertiesList(),i=t.selectedPropertiesList;if(e.length)for(var r=0;r<e.length;r++)if(e[r].index>0){var n=e[r].index-1,o=e[r].index,d=e[r],s=i.options[e[r].index-1];i.removeChild(d),i.removeChild(s),i.add(d,n),i.add(s,o)}},t.moveSelectedItemsDown=function(){var e=t.getSelectionFromSelectedPropertiesList(),i=t.selectedPropertiesList;if(e.length)for(var r=e.length-1;r>=0;r--)if(e[r].index+1<=i.length-1){var n=e[r].index,o=e[r].index+1,d=e[r],s=i.options[e[r].index+1];i.removeChild(s),i.removeChild(d),i.add(s,n),i.add(d,o)}},t.moveSelectedItemsToEnd=function(){var e=t.getSelectionFromSelectedPropertiesList(),i=t.selectedPropertiesList;if(e.length)for(var r=e.length-1;r>=0;r--)i.removeChild(e[r]),i.add(e[r])},t.moveSelectedItemsToBegin=function(){var e=t.getSelectionFromSelectedPropertiesList(),i=t.selectedPropertiesList;if(e.length)for(var r=0;r<e.length;r++)i.removeChild(e[r]),i.add(e[r],0)},t.showPropertyOnAvailablePropertiesList=function(i){var r=t.availablePropertiesList.querySelector('option[value="'+i+'"]');e.showElementAsBlock(r)},t.getSelectionFromSelectedPropertiesList=function(){for(var e=[],i=t.selectedPropertiesList,r=0;r<t.selectedPropertiesList.length;r++)i.options[r].selected&&e.push(i.options[r]);return e},t.initialize(),t});