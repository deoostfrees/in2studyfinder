define(["TYPO3/CMS/In2studyfinder/Utility/UiUtility","TYPO3/CMS/In2studyfinder/Utility/AjaxUtility","TYPO3/CMS/In2studyfinder/Utility/UrlUtility"],function(e,t,n){"use strict";var i={selectedCoursesCount:0,coursesList:[]};return i.initialize=function(){i.preparePagination(),i.prepareSelectedCourses(),i.addEventListener()},i.addEventListener=function(){var e=document.querySelector(".js-in2studyfinder-check-all");e.addEventListener("click",i.toggleAllCoursesSelect);var t=document.querySelector(".js-in2studyfinder-pagebrowser");t.addEventListener("click",i.callPagination);var n=document.querySelector(".js-in2studyfinder-itemsPerPage");n.onchange=function(e){i.updateItemsPerPage(e)};var r=document.querySelector(".js-in2studyfinder-recordLanguage");r.onchange=function(e){i.updateRecordLanguage(e)};var o=document.querySelector(".js-in2studyfinder-course-list");o.addEventListener("click",i.toggleCourseSelection)},i.toggleAllCoursesSelect=function(e){var t,n=document.querySelectorAll(".js-in2studyfinder-select-course"),i=e.target;t=i.checked?1:0,n.forEach(function(e){e.checked=t})},i.prepareSelectedCourses=function(){var e=i.coursesList;e.length>0&&(console.log(e.length),console.log(i.coursesList))},i.updateItemsPerPage=function(e){var t=e.target.selectedOptions,n=t[0].getAttribute("data-action");"undefined"!=typeof n&&i.paginationAjaxCall(n)},i.updateRecordLanguage=function(e){var t=e.target.selectedOptions,n=t[0].getAttribute("data-action");console.log(n),"undefined"!=typeof n&&i.paginationAjaxCall(n)},i.callPagination=function(e){e.preventDefault();var t=e.target.href,r=document.querySelector(".js-in2studyfinder-itemsPerPage").value;"undefined"!=typeof t&&(t=n.addAttributeToUrl(t,"tx_in2studyfinder_web_in2studyfinderm1[@widget_0][itemsPerPage]",r),i.paginationAjaxCall(t))},i.paginationAjaxCall=function(e){t.ajaxCall(e,i.onPaginationCallStart,i.onPaginationCallSuccess)},i.onPaginationCallStart=function(){e.toggleClassForElement(document.querySelector(".in2js-in2studyfinder-loader"),"in2studyfinder-loader--active")},i.onPaginationCallSuccess=function(t){var n=document.createElement("div"),r="js-in2studyfinder-select-course-container";n.innerHTML=t.responseText,document.querySelector("."+r).innerHTML=n.querySelector("."+r).innerHTML,i.initialize(),i.updateSelectedCoursesCount(),e.toggleClassForElement(document.querySelector(".in2js-in2studyfinder-loader"),"in2studyfinder-loader--active")},i.toggleCourseSelection=function(e){var t=e.target;t.classList.contains("js-in2studyfinder-select-course")&&(t.checked?(i.addCourseToList(t.value),i.selectedCoursesCount++):(i.removeCourseFromList(t.value),i.selectedCoursesCount--),i.updateSelectedCoursesCount())},i.addCourseToList=function(e){i.coursesList.push(e)},i.removeCourseFromList=function(e){i.coursesList.push(e)},i.updateSelectedCoursesCount=function(){var e=document.querySelector(".js-in2studyfinder-selected-courses-count");e.innerHTML=i.selectedCoursesCount},i.getCourseList=function(){return i.coursesList},i.preparePagination=function(){var e=document.querySelector(".js-in2studyfinder-pagebrowser");document.querySelector(".js-in2studyfinder-pagination").appendChild(e)},i.initialize(),i});