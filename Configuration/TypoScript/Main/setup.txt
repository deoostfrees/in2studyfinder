plugin.tx_in2studyfinder {
	view {
		templateRootPaths.0 = {$plugin.tx_in2studyfinder.view.templateRootPath}
		partialRootPaths.0 = {$plugin.tx_in2studyfinder.view.partialRootPath}
		layoutRootPaths.0 = {$plugin.tx_in2studyfinder.view.layoutRootPath}

		widget {
			TYPO3\CMS\Fluid\ViewHelpers\Widget\PaginateViewHelper {
				templateRootPath = EXT:in2studyfinder/Resources/Private/Templates/
			}
		}
	}

	settings {
		storagePid = {$plugin.tx_in2studyfinder.settings.storagePid}
		settingsPid = {$plugin.tx_in2studyfinder.settings.settingsPid}

		pagination {
			itemsPerPage = {$plugin.tx_in2studyfinder.settings.pagination.itemsPerPage}
		}

		filters {
			graduation {
				type = object
				objectModel = In2code\In2studyfinder\Domain\Model\Graduation
				propertyPath = academicDegree.graduation
				frontendLabel = LLL:EXT:in2studyfinder/Resources/Private/Language/locallang.xlf:graduation
			}

			typeOfStudy {
				type = object
				objectModel = In2code\In2studyfinder\Domain\Model\TypeOfStudy
				propertyPath = typesOfStudy
				frontendLabel = LLL:EXT:in2studyfinder/Resources/Private/Language/locallang.xlf:typeOfStudy
			}

			admissionRequirement {
				type = object
				objectModel = In2code\In2studyfinder\Domain\Model\AdmissionRequirement
				propertyPath = admissionRequirements
				frontendLabel = LLL:EXT:in2studyfinder/Resources/Private/Language/locallang.xlf:admissionRequirement
			}

			startOfStudy {
				type = object
				objectModel = In2code\In2studyfinder\Domain\Model\StartOfStudy
				propertyPath = startsOfStudy
				frontendLabel = LLL:EXT:in2studyfinder/Resources/Private/Language/locallang.xlf:startOfStudy
			}

			courseLanguage {
				type = object
				objectModel = In2code\In2studyfinder\Domain\Model\CourseLanguage
				propertyPath = courseLanguages
				frontendLabel = LLL:EXT:in2studyfinder/Resources/Private/Language/locallang.xlf:courseLanguage
			}

			faculty {
				type = object
				objectModel = In2code\In2studyfinder\Domain\Model\Faculty
				propertyPath = faculty
				frontendLabel = LLL:EXT:in2studyfinder/Resources/Private/Language/locallang.xlf:faculty
			}

			department {
				type = object
				objectModel = In2code\In2studyfinder\Domain\Model\Department
				propertyPath = department
				frontendLabel = LLL:EXT:in2studyfinder/Resources/Private/Language/locallang.xlf:department
				#                disabledInFrontend = 1
			}

			#            credits {
			#                type = boolean
			#                propertyPath = ectsCredits
			#                frontendLabel = FrontendLabel
			#            }
		}

		backend {
			pluginPreviewTemplate = {$plugin.tx_in2studyfinder.settings.backend.pluginPreviewTemplate}

			export {
				excludedPropertiesForExport {
					0 = _localizedUid
					1 = _languageUid
					2 = _versionedUid
					3 = globalDataPreset
					4 = globalData
					5 = contentElements
					6 = pid
					7 = uid
					8 = deleted
					9 = hidden
					10 = sorting
				}

				includeDeleted = 0
				includeHidden = 0
			}
		}

	}

	persistence {
		storagePid = {$plugin.tx_in2studyfinder.persistence.storagePid}
		recursive = {$plugin.tx_in2studyfinder.persistence.recursive}
	}
}

# Module configuration
module.tx_in2studyfinder < plugin.tx_in2studyfinder


############################
# Page type for ajax request
############################
in2studyfinderFilterAjax = PAGE
in2studyfinderFilterAjax {
	typeNum = 1308171055
	config {
		additionalHeaders = Content-type:application/html
		no_cache = 1
		disableAllHeaderCode = 1
		disablePrefixComment = 1
		xhtml_cleaning = 0
		admPanel = 0
		debug = 0
	}

	10 = USER_INT
	10 {
		userFunc = TYPO3\CMS\Extbase\Core\Bootstrap->run
		extensionName = In2studyfinder
		pluginName = Pi1
		vendorName = In2code
		controller = StudyCourse
		action = filter
		features.requireCHashArgumentForActionArguments = 0
	}
}

############################
# WORKAROUND
#
# ajax request for the export
#
# @see BackendController->exportAction
############################
in2studyfinderGetCourseJson = PAGE
in2studyfinderGetCourseJson {
	typeNum = 2308171056
	config {
		additionalHeaders.10.header = Content-Type: application/json
		no_cache = 1
		disableAllHeaderCode = 1
		disablePrefixComment = 1
		xhtml_cleaning = 0
		admPanel = 0
		debug = 0
	}

	10 = USER
	10 {
		userFunc = TYPO3\CMS\Extbase\Core\Bootstrap->run
		extensionName = In2studyfinder
		pluginName = Pi1
		vendorName = In2code
		controller = StudyCourse
		switchableControllerActions.StudyCourse.1 = getCoursesJson
		features.requireCHashArgumentForActionArguments = 0
	}
}


############################
# JavaScript and CSS section
############################

page.includeCSS.in2studyfinderCss = {$plugin.tx_in2studyfinder.settings.css.in2studyfinderCss}

# add In2studyfinder JavaScripts
page {
	# requirejs
	footerData.1497382690 = COA
	footerData.1497382690 {
		10 = TEXT
		10 {
			wrap = <script>|</script>
			value = requireJsBasePath = '/{path:EXT:in2studyfinder/Resources/Public/JavaScript/}'
			stdWrap.insertData = 1
		}

		15 = TEXT
		15 {
			wrap = <script>|</script>
			value = jqueryBasePath = '/typo3/sysext/core/Resources/Public/JavaScript/Contrib/jquery/jquery-3.2.1.min'
		}

		20 = TEXT
		20 {
			value = /typo3/sysext/core/Resources/Public/JavaScript/Contrib/require.js
			stdWrap.insertData = 1
			wrap = <script src="|"
			noTrimWrap = | ||
		}

		30 = TEXT
		30 {
			value = /{path:EXT:in2studyfinder/Resources/Public/JavaScript/main.js}
			stdWrap.insertData = 1
			wrap = data-main="|"></script>
			noTrimWrap = | ||
		}
	}
}

[compatVersion = 9.5.0]
	page {
		footerData.1497382690 {
			15 = TEXT
			15 {
				wrap = <script>|</script>
				value = jqueryBasePath = '/typo3/sysext/core/Resources/Public/JavaScript/Contrib/jquery/jquery'
			}
		}
	}
[end]

############################
# Default language configuration 0=de / 1=en
#
# different configurations have to be done either in the template extension or in2studyfinder_extend
############################

[globalVar = GP:L = 1]
	page.includeJSFooter.in2studyfinderJavaScriptSelect2Language = EXT:in2studyfinder/Resources/Public/JavaScript/i18n/en.js

	in2studyfinderFilterAjax {
		config {
			sys_language_uid = 1
			sys_language_mode = strict
			language = en
		}
	}
[end]
